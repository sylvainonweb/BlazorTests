@using BlazorTests.Services
@using BlazorTests.Data
@using Telerik.Blazor;
@using Telerik.Blazor.Components.DropDownList
@using System.ComponentModel.DataAnnotations
@inject BlazorTests.Services.ContactService ContactService


<div style="height:400px;">

    <EditForm Model="@this" OnValidSubmit="@(() => Save())">

        <div class="row">
            <div class="col-auto">
                <TelerikDropDownList Data="DropDownListData" @bind-Value="SelectedValue" DefaultItem="@DefaultItem" TItem="Product" TValue="int?"
                                     ValueField="ProductId" TextField="ProductName"></TelerikDropDownList>
            </div>
            <div class="col-auto">
                <button type="submit">Sauvegarder</button>
            </div>
        </div>

        <DataAnnotationsValidator />
        <ValidationSummary />
    </EditForm>   

</div>

@code {
    public IEnumerable<Product> DropDownListData { get; set; }
    public Product DefaultItem { get; set; } = new Product()
    {
        ProductId = 0,
        ProductName = "Select a product..."
    };

    [Required]
    public int? SelectedValue { get; set; }

    protected override void OnInitialized()
    {
        List<Product> products = new List<Product>();
        for (int i = 0; i < 5; i++)
        {
            products.Add(new Product()
            {
                ProductId = i,
                ProductName = "Product" + i.ToString(),
            });
        }

        DropDownListData = products.AsQueryable();
        base.OnInitialized();
    }

    public void Save()
    {
    }

    public class Product
    {
        public int ProductId { get; set; }
        public string ProductName { get; set; }
    }
}
